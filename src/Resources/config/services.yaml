services:
    ##### Library services


    deliveryman.config_manager.abstract:
        class: Deliveryman\Service\ConfigManager
        abstract: true
        public: false
        autowire: true
#        arguments:
#            $configs: # TODO: inject somehow configs on extension bundle build
#                -   domains:
#                        - example.com

    deliveryman.channel.abstract:
        class: Deliveryman\Channel\AbstractChannel
        abstract: true
        public: true
        autowire: true
#        arguments:
#            $configManager: '@deliveryman.config_manager.abstract'

    deliveryman.channel.http_graph.abstract:
        class: Deliveryman\Channel\HttpGraphChannel
        abstract: true
        public: true
        autowire: true
        arguments:
            $configManager: '@deliveryman.config_manager.abstract'
        tags:
            - {name: 'deliveryman.channel', alias: 'http_graph'}


    deliveryman.validator:
        class: Deliveryman\Service\BatchRequestValidator
        public: false
        autowire: true
        arguments:
            $configManager: '@deliveryman.config_manager'

    deliveryman.normalizer:
        class: Deliveryman\Normalizer\BatchRequestNormalizer
        autowire: true
        autoconfigure: true

    # TODO: sender deliveryman.sender.abstract - define by config extension on build default sender
#    deliveryman.sender.http:
#        class: Deliveryman\Service\Sender
#        public: true
#        autowire: true
#        arguments:
#            $channel: '@deliveryman.http_channel'
#            $configManager: '@deliveryman.config_manager'
#            $batchRequestValidator: '@deliveryman.validator'